{% extends "base.html" %}

{% block title %}
    Registro - RNS System
{% endblock %}

{% block content %}
<div class="container mt-1 p-1">
	<h3 class="text-center"> Registro e Descrição da NC </h3>
	<hr>
	{% with msgs =  get_flashed_messages(with_categories=True) %}
		{% for c, msg in msgs %}
			{% if c == 'error' %}
				<div class="flash-error">
			{% else %}
				<div class="success">
			{% endif %}
				{{ msg | safe }}</div><br>
		{% endfor %}
	{% endwith %}	
    <nav class="nav_tabs">
        <!--Tabs-->
        <ul>
            <li>    
              <input type="radio"  class="rd_tab" id="tab1" name="tabs" checked>
              <label for="tab1" class="tab_label">Fase 1</label>      
            </li>
            <li>
              <input type="radio" class="rd_tab" id="tab2" name="tabs">
              <label for="tab2" class="tab_label">Fase 2</label>      
            </li>	
            <li>
              <input type="radio" class="rd_tab" id="tab3" name="tabs">
              <label for="tab3" class="tab_label">Fase 3</label>
              
            </li>
            <li>
              <input type="radio" class="rd_tab" id="tab4" name="tabs">
              <label for="tab4" class="tab_label">Fase 4</label>
              
            </li>
            <li>
              <input type="radio" class="rd_tab" id="tab5" name="tabs">
              <label for="tab5" class="tab_label">Fase 5</label>
              
            </li>
            <li>
              <input type="radio" class="rd_tab" id="tab6" name="tabs">
              <label for="tab6" class="tab_label">Fase 6</label>
              
            </li> 
            <li>
              <input type="radio" class="rd_tab" id="tab7" name="tabs">
              <label for="tab7" class="tab_label">Fase 7</label>
              
            </li>             	
        </ul>

        <!--Fase 1-->
        <div class="tab-content" data-tab="tab1">
            <form action="{{ url_for('create_rnc') }}" method="POST">
                {{ form1.csrf_token }}
                <div class="row">                          
                    {% set fields = [] %}
                    {% for field in form1 %}
                        {% set temp = fields.append(field) %}                                                      
                    {% endfor %}

                    {% for i in range(0,7) %} 
                    <!--Etapa 1-->                       
                        <div class="col-md-3 p-5">
                            
                            <div class="form-group">
                                {{ fields[i].label }}
                                {{ fields[i](class='form-control') }}
                                {% for error in fields[i].errors %}
                                <span style="color: red;">[{{ error }}]</span>
                                {% endfor %}
                            </div>
                        
                        </div>
                    {% endfor %}
                </div>
                <hr>
                <div class="row">
                    {% for i in range(7,9) %} 
                    <!--Etapa 2-->                       
                        <div class="col-md-5 p-5">                            
                            <div class="form-group">                                
                                {{ fields[i].label }}
                                {{ fields[i] }}
                                {% for error in fields[i].errors %}
                                <span style="color: red;">[{{ error }}]</span>
                                {% endfor %}                               
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <hr>
                <div class="row">
                    {% for i in range(9,12) %} 
                    <!--Etapa 3-->                       
                        <div class="col-md-4 p-5">                                
                            <div class="form-group">
                                {{ fields[i].label }}
                                {{ fields[i] }}
                                {% for error in fields[i].errors %}
                                <span style="color: red;">[{{ error }}]</span>
                                {% endfor %} 
                            </div>                            
                        </div>
                    {% endfor %}
                </div>
                <hr>
                <div class="row">
                    {% for i in range(12,19) %} 
                    <!--Etapa 4-->                       
                        <div class="col-md-4 p-5">                                
                            <div class="form-group">
                                {{ fields[i].label }}
                                {{ fields[i] }}
                                {% for error in fields[i].errors %}
                                <span style="color: red;">[{{ error }}]</span>
                                {% endfor %} 
                            </div>                              
                        </div>
                    {% endfor %}
                </div>
                <hr>
                <div class="row">
                    {% for i in range(19,23) %}
                    <!--Etapa 5-->                        
                        <div class="col-md-6 p-5">                                
                            <div class="form-group">
                                {{ fields[i].label }}
                                {{ fields[i] }}
                                {% for error in fields[i].errors %}
                                <span style="color: red;">[{{ error }}]</span>
                                {% endfor %} 
                            </div>                           
                        </div>
                    {% endfor %}
                </div>
                <hr>
                <div class="row p-5 text-center">
                    <p>Anexar arquivo</p>
                    <div class="col-md-12">{{ form1.anexo }}</div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-md-6 p-3">{{ form1.visto }}</div>                    
                </div>
                <input type="submit" class="btn btn-success">
                <hr>
            </form>
        </div>

        <!--Fase 2-->
        <div class="tab-content" data-tab="tab2">  
            <div class="row">                          
                {% set fields2 = [] %}
                {% for field2 in form2 %}
                    {% set temp = fields2.append(field2) %}                                                      
                {% endfor %}

                <div class="col-md-12 p-5"> 
                    <!--Etapa 1-->              
                        <div class="row"> 
                            <p>2.1 - Gemba</p>
                            {% for i in range(0,2) %} 
                           <div class="col-md-6">
                                                               
                                <div class="table-responsive">                                
                                    <th>{{ fields2[i].label }}</th>
                                    <td>{{ fields2[i] }}</td>
                                </div>
                            </div> 
                            {% endfor %}                     
                        </div>   
                </div>
            </div>
            <hr>
            <div class="row">   
                <!--Etapa 2-->                       
                    <div class="col-md-12 p-5">
                        <div class="row">
                            <p>2.2 - Gembutsu</p>
                            <div class="table-responsive">
                                <th>{{ fields2[3].label }}</th>
                                <td>{{ fields2[3] }}</td>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <p>2.3 - Genjitsu</p>
                            <div class="table-responsive">
                                <th>{{ fields2[4].label }}</th>
                                <td>{{ fields2[4] }}</td>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <p>2.4 - Genri</p>
                            <div class="table-responsive">
                                <th>{{ fields2[5].label }}</th>
                                <td>{{ fields2[5] }}</td>
                            </div>
                        </div>
                    
                    </div>
                
            </div>
            <hr>		
        </div>
        <div class="tab-content" data-tab="tab3">  
            <form action="{{ url_for('create_rnc') }}" method="POST">
                {{ form1.csrf_token }}

                {% set fields = [] %}
                {% for field in form1 %}
                    {% set temp = fields.append(field) %}                                                      
                {% endfor %}

                {% for i in range(0,9) %}
                <div class="form-group">
                    {{ fields[i].label }}
                    {{ fields[i](class='form-control') }}
                    {% for error in fields[i].errors %}
                    <span style="color: red;">[{{ error }}]</span>
                    {% endfor %}
                </div>
                {% endfor %}
                <input type="submit" class="btn btn-success">
            </form>
        </div>
        <div class="tab-content" data-tab="tab4">  
            Conteúdo Aba 4		
        </div>
        <div class="tab-content" data-tab="tab5">  
            Conteúdo Aba 5		
        </div>
        <div class="tab-content" data-tab="tab6">  
            Conteúdo Aba 6		
        </div>
        <div class="tab-content" data-tab="tab7">  
            Conteúdo Aba 7		
        </div>                
    </nav>
</div>

<div>

</div>

<script>
    var atual;
    var contents = document.querySelectorAll("[data-tab]")
    var onRadioChange = function (event) {
    if (atual) atual.content.classList.toggle("show", atual.radio.checked)
    this.content.classList.toggle("show", this.radio.checked)
    atual = this
    };

    [].forEach.call(contents, function (content) {
    var obj = {};
    obj.content = content
    obj.radio = document.getElementById(content.dataset.tab)
    obj.radio.addEventListener("change", onRadioChange.bind(obj))
    if (obj.radio.checked) {  
        obj.radio.dispatchEvent(new Event("change"))
    }
    })
</script>

{% endblock %}